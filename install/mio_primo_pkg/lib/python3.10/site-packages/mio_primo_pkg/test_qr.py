import cv2
from pyzbar.pyzbar import decode
import sys

# Passa il nome dell'immagine come argomento o modifica qui
img_path = 'image.png' 

img = cv2.imread(img_path)
if img is None:
    print("Errore caricamento immagine")
    sys.exit()

# Prova PYZBAR (Molto più robusto)
decoded_objects = decode(img)

if decoded_objects:
    print(f"✅ SUCCESSO CON PYZBAR! Trovati: {len(decoded_objects)}")
    for obj in decoded_objects:
        print(f"Dati: {obj.data.decode('utf-8')}")
else:
    print("❌ Niente. Nemmeno Pyzbar ce la fa. L'immagine è davvero troppo sfocata/piccola.")

# Prova OPENCV (Per confronto)
detector = cv2.QRCodeDetector()
ret, _, _, _ = detector.detectAndDecodeMulti(img)
if ret:
    print("✅ SUCCESSO CON OPENCV")
else:
    print("❌ Fallito con OpenCV")